# MATTIN AI - Backend Environment Variables

# AUTHENTICATION MODE [REQUIRED]
# FAKE: Simple email login (for development)
# OIDC: Microsoft Entra ID / Azure AD (for production)
AICT_LOGIN=FAKE

# AI SERVICE API KEYS [OPTIONAL]
# You can configure API keys here or from the web interface.
# Only needed when you want to use AI models.
# OpenAI API Key (required for GPT models)
OPENAI_API_KEY=sk-proj-your-openai-api-key-here

# Anthropic API Key (required for Claude models)
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-api-key-here

# Mistral API Key (required for Mistral models)
MISTRAL_API_KEY=your-mistral-api-key-here

# LANGSMITH CONFIGURATION (Optional - for LLM tracing)
LANGSMITH_TRACING=true
LANGSMITH_ENDPOINT=https://api.smith.langchain.com
LANGSMITH_API_KEY=lsv2_pt_your-langsmith-api-key-here
LANGSMITH_PROJECT=your-project-name

# DATABASE CONFIGURATION
# Option 1: Use direct database URL (recommended for simple setups)
SQLALCHEMY_DATABASE_URI=postgresql://username:password@localhost:5432/dbname

# Option 2: Use separate database variables (recommended for production)
DATABASE_USER=your_db_user
DATABASE_PASSWORD=your_db_password
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=your_database_name

# APPLICATION CONFIGURATION
APP_TITLE=IA Core Tools API
APP_DESCRIPTION=Modern FastAPI backend for IA Core Tools
APP_VERSION=2.0.6
ROOT_MESSAGE=IA Core Tools FastAPI Backend

# Application mode: ONLINE or SELF-HOSTED
AICT_MODE=SELF-HOSTED

# Comma-separated list of omniadmin emails
AICT_OMNIADMINS=admin1@example.com,admin2@example.com

# AUTHENTICATION & OAUTH (lks-idprovider)
# Azure EntraID (formerly Azure AD) Configuration
ENTRA_TENANT_ID=your-tenant-id-here
ENTRA_CLIENT_ID=your-client-id-here
ENTRA_CLIENT_SECRET=your-client-secret-here

# Token type to accept and validate
# ID_TOKEN: For OIDC authentication (aud=client_id) - No "Expose an API" needed
# ACCESS_TOKEN: For OAuth 2.0 authorization (aud=api://client_id) - Requires "Expose an API" in Azure
ENTRA_TOKEN_TYPE=ACCESS_TOKEN

# JWT validation settings
ENTRA_VALIDATE_AUDIENCE=true
ENTRA_VALIDATE_ISSUER=true
ENTRA_LEEWAY=0

# Microsoft Graph API version (v1.0 or beta)
ENTRA_API_VERSION=v1.0

# CORS & FRONTEND CONFIGURATION
FRONTEND_URL=http://localhost:5173

# OIDC Authentication: Enable OIDC (EntraID) authentication
# When true: Uses EntraID OIDC authentication (production)
# When false: Uses simple JWT tokens for development (dev mode)
OIDC_ENABLED=false

# Secret key for JWT token signing (used in dev mode)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-secret-key-here-change-in-production

# DEV MODE AUTHENTICATION SETUP
# 1. Set OIDC_ENABLED=false in this file
# 2. Seed test users: python -m utils.seed_dev_users
# 3. Start backend: uvicorn main:app --reload
# 4. Frontend: Set VITE_OIDC_ENABLED=false in frontend/.env
# 5. Login with any seeded user email (e.g., admin@example.com)
#
# Note: Only users with emails in the database can login in dev mode.
# Run seeding script to create default test users.

# CORS Origins (only used if OIDC_ENABLED=false)
CORS_ORIGIN_DEV_SERVER=http://localhost:5173
CORS_ORIGIN_DEV_SERVER_ALT=http://127.0.0.1:5173
CORS_ORIGIN_DOCKER=http://localhost:3000
CORS_ORIGIN_DOCKER_ALT=http://127.0.0.1:3000
CORS_ORIGIN_DEV_8080=http://localhost:8080
CORS_ORIGIN_DEV_8080_ALT=http://127.0.0.1:8080
CORS_ORIGIN_VITE_PREVIEW=http://localhost:4173
CORS_ORIGIN_VITE_PREVIEW_ALT=http://127.0.0.1:4173

LOG_LEVEL=INFO
LOG_DIR=logs

DOWNLOADS_PATH=./app/downloads/
IMAGES_PATH=./app/images/
REPO_BASE_FOLDER=./app/repositories/
TEMP_DIR=data/temp/uploads/

PERMANENT_SESSION_LIFETIME_MINUTES=30

# Internal API Documentation
INTERNAL_API_TITLE=IA Core Tools - Internal API
INTERNAL_API_VERSION=2.0.0
INTERNAL_API_DESCRIPTION=Internal API for frontend-backend communication
INTERNAL_DOCS_OPENAPI_URL=/openapi-internal.json
INTERNAL_DOCS_TITLE=Internal API Docs
INTERNAL_DOCS_PATH=/docs/internal

# Public API Documentation
PUBLIC_API_TITLE=IA Core Tools - Public API
PUBLIC_API_VERSION=1.0.0
PUBLIC_API_DESCRIPTION=Public API for external applications
PUBLIC_DOCS_OPENAPI_URL=/openapi-public.json
PUBLIC_DOCS_TITLE=Public API Docs
PUBLIC_DOCS_PATH=/docs/public
