{% extends "base.html" %}

{% block content %}

<div class="container-fluid">
    <!-- Page title START -->
    <div class="row g-4 align-items-center mb-4">
        <div class="col">
            <h1 class="h3 mb-0">{{app.name}}</h1>
            <p class="text-muted mb-0">App Dashboard - Manage your AI components and data</p>
        </div>
        <div class="col-auto">
            <a href="{{ url_for('my_apps') }}" class="btn btn-light">
                <i class="bi bi-arrow-left me-2"></i>Back to Apps
            </a>
        </div>
    </div>
    <!-- Page title END -->

    <!-- Main cards START -->
    <div class="row g-4">
        <!-- Agents Card -->
        <div class="col-md-6 col-xl-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-lg bg-primary bg-opacity-10 rounded-3">
                            <i class="bi bi-robot text-primary"></i>
                        </div>
                        <div class="ms-3 flex-grow-1">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">AI Agents</h5>
                                <span class="badge bg-primary rounded-pill">{{ stats.agents }}</span>
                            </div>
                            <p class="text-muted mb-0">Intelligent automation</p>
                        </div>
                    </div>
                    <p class="card-text">Create and manage intelligent agents that can handle complex tasks and workflows.</p>
                    <div class="d-grid">
                        <a href="{{url_for('agents.app_agents', app_id=session['app_id']) }}" class="btn btn-primary">
                            <i class="bi bi-arrow-right me-2"></i>Manage Agents
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Repositories Card -->
        <div class="col-md-6 col-xl-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-lg bg-success bg-opacity-10 rounded-3">
                            <i class="bi bi-database text-success"></i>
                        </div>
                        <div class="ms-3 flex-grow-1">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Repositories</h5>
                                <span class="badge bg-success rounded-pill">{{ stats.repositories }}</span>
                            </div>
                            <p class="text-muted mb-0">Data storage & retrieval</p>
                        </div>
                    </div>
                    <p class="card-text">Organize and manage your data repositories efficiently with built-in versioning and search.</p>
                    <div class="d-grid">
                        <a href="{{url_for('repositories.repositories', app_id=session['app_id']) }}" class="btn btn-success">
                            <i class="bi bi-arrow-right me-2"></i>Manage Repositories
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Silos Card -->
        <div class="col-md-6 col-xl-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-lg bg-warning bg-opacity-10 rounded-3">
                            <i class="bi bi-box text-warning"></i>
                        </div>
                        <div class="ms-3 flex-grow-1">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Silos</h5>
                                <span class="badge bg-warning rounded-pill">{{ stats.silos }}</span>
                            </div>
                            <p class="text-muted mb-0">Vector storage & search</p>
                        </div>
                    </div>
                    <p class="card-text">Organize and manage your data silos for better data isolation and vector search.</p>
                    <div class="d-grid">
                        <a href="{{ url_for('silos.silos', app_id=session['app_id']) }}" class="btn btn-warning">
                            <i class="bi bi-arrow-right me-2"></i>Manage Silos
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Output Parsers Card -->
        <div class="col-md-6 col-xl-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-lg bg-info bg-opacity-10 rounded-3">
                            <i class="bi bi-file-text text-info"></i>
                        </div>
                        <div class="ms-3 flex-grow-1">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Data Structures</h5>
                                <span class="badge bg-info rounded-pill">{{ stats.output_parsers }}</span>
                            </div>
                            <p class="text-muted mb-0">Output formatting</p>
                        </div>
                    </div>
                    <p class="card-text">Configure how your agents process and format their outputs with structured data schemas.</p>
                    <div class="d-grid">
                        <a href="{{ url_for('output_parsers.app_output_parsers', app_id=session['app_id']) }}" class="btn btn-info">
                            <i class="bi bi-arrow-right me-2"></i>Manage Structures
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Domains Card -->
        <div class="col-md-6 col-xl-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-lg bg-purple bg-opacity-10 rounded-3">
                            <i class="bi bi-globe text-purple"></i>
                        </div>
                        <div class="ms-3 flex-grow-1">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">Domains</h5>
                                <span class="badge bg-purple rounded-pill">{{ stats.domains }}</span>
                            </div>
                            <p class="text-muted mb-0">Web content management</p>
                        </div>
                    </div>
                    <p class="card-text">Configure and manage your application domains and web content scraping settings.</p>
                    <div class="d-grid">
                        <a href="{{ url_for('domains.domains') }}" class="btn" style="background-color: #6f42c1; color: white;">
                            <i class="bi bi-arrow-right me-2"></i>Manage Domains
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Keys Card -->
        <div class="col-md-6 col-xl-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-lg bg-secondary bg-opacity-10 rounded-3">
                            <i class="bi bi-key text-secondary"></i>
                        </div>
                        <div class="ms-3 flex-grow-1">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">API Keys</h5>
                                <span class="badge bg-secondary rounded-pill">?</span>
                            </div>
                            <p class="text-muted mb-0">Access management</p>
                        </div>
                    </div>
                    <p class="card-text">Securely manage your API keys and access tokens for external service integrations.</p>
                    <div class="d-grid">
                        <a href="{{ url_for('api_keys.list_api_keys') }}" class="btn btn-secondary">
                            <i class="bi bi-arrow-right me-2"></i>Manage API Keys
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Main cards END -->

    <!-- Quick Actions Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title mb-3">
                        <i class="bi bi-lightning me-2"></i>Quick Actions
                    </h5>
                    <div class="row g-3">
                        <div class="col-md-3">
                            <a href="{{ url_for('agents.app_agent_get', app_id=session['app_id'], agent_id=0) }}" class="btn btn-outline-primary w-100">
                                <i class="bi bi-plus-circle me-2"></i>New Agent
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="{{ url_for('repositories.repository', app_id=session['app_id'], repository_id=0) }}" class="btn btn-outline-success w-100">
                                <i class="bi bi-plus-circle me-2"></i>New Repository
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="{{ url_for('silos.silo', app_id=session['app_id'], silo_id=0) }}" class="btn btn-outline-warning w-100">
                                <i class="bi bi-plus-circle me-2"></i>New Silo
                            </a>
                        </div>
                        <div class="col-md-3">
                            <a href="{{ url_for('output_parsers.app_output_parser', app_id=session['app_id'], parser_id=0) }}" class="btn btn-outline-info w-100">
                                <i class="bi bi-plus-circle me-2"></i>New Structure
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.text-purple {
    color: #6f42c1 !important;
}
.bg-purple {
    background-color: #6f42c1 !important;
}
</style>

{% endblock %}